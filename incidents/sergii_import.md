```
2023-07-13 17:19:07,144 ERROR [        ome.services.util.ServiceHandler] (erver-8641) Method interface ome.api.RawFileStore.save invocation took 41813
2023-07-13 17:21:28,028 ERROR [        ome.services.util.ServiceHandler] (erver-8636) Method interface ome.api.RawFileStore.save invocation took 43900
2023-07-13 17:23:22,926 ERROR [        ome.services.util.ServiceHandler] (erver-8638) Method interface ome.api.RawFileStore.save invocation took 53224
2023-07-13 17:25:17,111 ERROR [        ome.services.util.ServiceHandler] (erver-8640) Method interface ome.api.RawFileStore.save invocation took 30310
2023-07-13 17:26:55,711 ERROR [        ome.services.util.ServiceHandler] (erver-8648) Method interface ome.api.RawFileStore.save invocation took 45254
2023-07-13 17:27:52,087 ERROR [        ome.services.util.ServiceHandler] (erver-8641) Method interface ome.api.RawFileStore.save invocation took 24531
2023-07-13 17:28:55,360 ERROR [        ome.services.util.ServiceHandler] (erver-8648) Method interface ome.api.RawFileStore.save invocation took 28098
2023-07-13 17:30:12,978 ERROR [        ome.services.util.ServiceHandler] (erver-8640) Method interface ome.api.RawFileStore.save invocation took 34658
2023-07-13 17:31:28,007 ERROR [        ome.services.util.ServiceHandler] (erver-8651) Method interface ome.api.RawFileStore.save invocation took 32258
2023-07-13 17:32:55,896 ERROR [        ome.services.util.ServiceHandler] (erver-8642) Method interface ome.api.RawFileStore.save invocation took 39677
2023-07-13 17:34:21,495 ERROR [        ome.services.util.ServiceHandler] (erver-8644) Method interface ome.api.RawFileStore.save invocation took 38230
2023-07-13 17:35:10,466 ERROR [        ome.services.util.ServiceHandler] (erver-8636) Method interface ome.api.RawFileStore.save invocation took 20697
2023-07-13 17:37:27,415 ERROR [        ome.services.util.ServiceHandler] (erver-8651) Method interface ome.api.RawFileStore.save invocation took 64167
2023-07-13 17:38:51,028 ERROR [        ome.services.util.ServiceHandler] (erver-8651) Method interface ome.api.RawFileStore.save invocation took 37005
2023-07-13 17:40:31,033 ERROR [        ome.services.util.ServiceHandler] (erver-8636) Method interface ome.api.RawFileStore.save invocation took 45626
2023-07-13 17:42:11,059 ERROR [        ome.services.util.ServiceHandler] (erver-8648) Method interface ome.api.RawFileStore.save invocation took 45666
2023-07-13 17:43:26,353 ERROR [        ome.services.util.ServiceHandler] (erver-8636) Method interface ome.api.RawFileStore.save invocation took 33828
```

```
2023-07-14 08:45:37,602 ERROR [        ome.services.util.ServiceHandler] (-thread-21) Method interface ome.services.util.Executor$Work.doWork invocation took 14908096
2023-07-14 08:53:38,514 INFO  [                ome.io.nio.PixelsService] (-thread-18) Pyramid creation for Pixels:415494 62677/69642 (89%).
```

OMERO.viewer says 'A "pyramid" of zoom levels is currently being calculated for this image, please ...'
```
2023-07-14 09:10:21,955 INFO  [                ome.io.nio.PixelsService] (-thread-19) Pyramid creation for Pixels:415505 1/53280 (0%).
2023-07-14 09:12:16,378 INFO  [                ome.io.nio.PixelsService] (-thread-11) Pyramid creation for Pixels:415506 379/3780 (10%).
2023-07-14 09:12:17,992 INFO  [                ome.io.nio.PixelsService] (-thread-23) Pyramid creation for Pixels:415509 389/3888 (9%).
2023-07-14 09:12:18,942 INFO  [                ome.io.nio.PixelsService] (-thread-13) Pyramid creation for Pixels:415508 389/3888 (9%).
2023-07-14 09:12:23,929 INFO  [                ome.io.nio.PixelsService] (1-thread-2) Pyramid creation for Pixels:415507 400/3996 (9%).
2023-07-14 09:14:12,879 INFO  [                ome.io.nio.PixelsService] (-thread-11) Pyramid creation for Pixels:415506 757/3780 (20%).
2023-07-14 09:14:18,210 INFO  [                ome.io.nio.PixelsService] (-thread-23) Pyramid creation for Pixels:415509 777/3888 (19%).
2023-07-14 09:14:21,015 INFO  [                ome.io.nio.PixelsService] (-thread-13) Pyramid creation for Pixels:415508 777/3888 (19%).
2023-07-14 09:14:26,920 INFO  [                ome.io.nio.PixelsService] (1-thread-2) Pyramid creation for Pixels:415507 799/3996 (19%).

2023-07-14 09:30:19,751 INFO  [ ome.services.pixeldata.PixelDataHandler] (-thread-23) Added StatsInfo:1054866 for ome.model.core.Channel:Id_1165726 - C:0 Max:255.0 Min:0.0
2023-07-14 09:30:19,752 INFO  [ ome.services.pixeldata.PixelDataHandler] (-thread-23) Added StatsInfo:1054867 for ome.model.core.Channel:Id_1165727 - C:1 Max:255.0 Min:0.0
2023-07-14 09:30:19,753 INFO  [ ome.services.pixeldata.PixelDataHandler] (-thread-23) Added StatsInfo:1054868 for ome.model.core.Channel:Id_1165728 - C:2 Max:255.0 Min:0.0
2023-07-14 09:30:19,753 INFO  [ ome.services.pixeldata.PixelDataHandler] (-thread-23) HANDLED EventLog:50758478(entityId=415509) [1197977 ms.]
2023-07-14 09:30:19,755 ERROR [        ome.services.util.ServiceHandler] (-thread-23) Method interface ome.services.util.Executor$Work.doWork invocation took 1198032
2023-07-14 09:30:21,697 INFO  [ ome.services.pixeldata.PixelDataHandler] (-thread-13) Added StatsInfo:1054869 for ome.model.core.Channel:Id_1165723 - C:0 Max:255.0 Min:0.0
2023-07-14 09:30:21,698 INFO  [ ome.services.pixeldata.PixelDataHandler] (-thread-13) Added StatsInfo:1054870 for ome.model.core.Channel:Id_1165724 - C:1 Max:255.0 Min:0.0
2023-07-14 09:30:21,699 INFO  [ ome.services.pixeldata.PixelDataHandler] (-thread-13) Added StatsInfo:1054871 for ome.model.core.Channel:Id_1165725 - C:2 Max:255.0 Min:0.0
2023-07-14 09:30:21,699 INFO  [ ome.services.pixeldata.PixelDataHandler] (-thread-13) HANDLED EventLog:50758477(entityId=415508) [1199923 ms.]
2023-07-14 09:30:21,702 ERROR [        ome.services.util.ServiceHandler] (-thread-13) Method interface ome.services.util.Executor$Work.doWork invocation took 1199979
2023-07-14 09:30:39,410 INFO  [                ome.io.nio.PixelsService] (1-thread-4) Pyramid creation for Pixels:415503 8587/28620 (30%).
2023-07-14 09:30:46,374 INFO  [ ome.services.pixeldata.PixelDataHandler] (1-thread-2) Added StatsInfo:1054872 for ome.model.core.Channel:Id_1165720 - C:0 Max:255.0 Min:0.0
2023-07-14 09:30:46,375 INFO  [ ome.services.pixeldata.PixelDataHandler] (1-thread-2) Added StatsInfo:1054873 for ome.model.core.Channel:Id_1165721 - C:1 Max:255.0 Min:0.0
2023-07-14 09:30:46,376 INFO  [ ome.services.pixeldata.PixelDataHandler] (1-thread-2) Added StatsInfo:1054874 for ome.model.core.Channel:Id_1165722 - C:2 Max:255.0 Min:0.0
2023-07-14 09:30:46,376 INFO  [ ome.services.pixeldata.PixelDataHandler] (1-thread-2) HANDLED EventLog:50758480(entityId=415507) [1224614 ms.]
2023-07-14 09:30:46,379 ERROR [        ome.services.util.ServiceHandler] (1-thread-2) Method interface ome.services.util.Executor$Work.doWork invocation took 1224657
```

# Public
Imported fine and got pixeldata logs saying calculating pyramid levels, but then next day in images.jax.org any attempt to read pixels results in `This instance is read-only` error
Planning to use bfconvert to pre-generate pyramid and convert to ome.tiff before uploading to public. Also, thumbnail has changed from clock to "no image"

bfconvert error
```
Tile size = 1024 x 1024
        Converted 1/1 planes (100%)
Tile size = 1024 x 1024
Exception in thread "main" loci.formats.FormatException: File is too large; call setBigTiff(true)
        at loci.formats.out.TiffWriter.prepareToWriteImage(TiffWriter.java:391)
        at loci.formats.out.TiffWriter.saveBytes(TiffWriter.java:278)
        at loci.formats.out.OMETiffWriter.saveBytes(OMETiffWriter.java:219)
        at loci.formats.out.PyramidOMETiffWriter.saveBytes(PyramidOMETiffWriter.java:89)
        at loci.formats.out.OMETiffWriter.saveBytes(OMETiffWriter.java:209)
        at loci.formats.tools.ImageConverter.convertTilePlane(ImageConverter.java:960)
        at loci.formats.tools.ImageConverter.convertPlane(ImageConverter.java:827)
        at loci.formats.tools.ImageConverter.testConvert(ImageConverter.java:760)
        at loci.formats.tools.ImageConverter.main(ImageConverter.java:1193)
```

bfconvert to btf error
```
Tile size = 1024 x 1024
        Converted 1/1 planes (100%)
Tile size = 1024 x 1024
        Converted 1/1 planes (100%)
Tile size = 1024 x 1024
        Converted 1/1 planes (100%)
Tile size = 1024 x 1024
        Converted 1/1 planes (100%)
Exception in thread "main" loci.formats.FormatException: Image plane too large. Only 2GB of data can be extracted at one time. You can work around the problem by opening the plane in tiles; for further details, see: https://docs.openmicroscopy.org/bio-formats/6.14.0/about/bug-reporting.html#common-issues-to-check
        at loci.formats.FormatReader.openBytes(FormatReader.java:916)
        at loci.formats.ImageReader.openBytes(ImageReader.java:449)
        at loci.formats.tools.ImageConverter.getTile(ImageConverter.java:1126)
        at loci.formats.tools.ImageConverter.convertPlane(ImageConverter.java:831)
        at loci.formats.tools.ImageConverter.testConvert(ImageConverter.java:760)
        at loci.formats.tools.ImageConverter.main(ImageConverter.java:1193)
Caused by: java.lang.IllegalArgumentException: Array size too large: 35392 x 36416 x 3 x 1
        at loci.common.DataTools.safeMultiply32(DataTools.java:1286)
        at loci.common.DataTools.allocate(DataTools.java:1259)
        at loci.formats.FormatReader.openBytes(FormatReader.java:913)
        ... 5 more
```
- because requested resolution 1022 < 1024 tile size, either use smaller tile size or request 4 resolutions instead of 5


## Final bfconvert command
```
time /local/tmp_kiya/bftools/bfconvert -noflat -pyramid-resolutions 4 -pyramid-scale 2 ./WM4237_TE_S4_ST.tiff WM4237_TE_S4_ST.ome.btf
```

Then edit file path in comment annotation in transfer.xml and nothing else

### Alternative command line tool
Sergii uses:
```
vips tiffsave plain.tiff pyramid.tiff --compression none --tile --tile-width 1024 --tile-height 1024 --pyramid --bigtiff
```